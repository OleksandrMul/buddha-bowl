import{g as v}from"./common.min.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function a(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(r){if(r.ep)return;r.ep=!0;const t=a(r);fetch(r.href,t)}})();let l={getErrors(e){let o=0,a=e.querySelectorAll("[required]");return a.length&&a.forEach(s=>{(s.offsetParent!==null||s.tagName==="SELECT")&&!s.disabled&&(o+=this.validateInput(s))}),o},validateInput(e){let o=0;return e.type==="email"?(e.value=e.value.replace(" ",""),this.emailTest(e)?(this.addError(e),this.removeSuccess(e),o++):(this.removeError(e),this.addSuccess(e))):e.type==="checkbox"&&!e.checked?(this.addError(e),this.removeSuccess(e),o++):e.value.trim()?(this.removeError(e),this.addSuccess(e)):(this.addError(e),this.removeSuccess(e),o++),o},addError(e){e.classList.add("--form-error"),e.parentElement.classList.add("--form-error");let o=e.parentElement.querySelector("[data-fls-form-error]");o&&e.parentElement.removeChild(o),e.dataset.flsFormErrtext&&e.parentElement.insertAdjacentHTML("beforeend",`<div data-fls-form-error>${e.dataset.flsFormErrtext}</div>`)},removeError(e){e.classList.remove("--form-error"),e.parentElement.classList.remove("--form-error"),e.parentElement.querySelector("[data-fls-form-error]")&&e.parentElement.removeChild(e.parentElement.querySelector("[data-fls-form-error]"))},addSuccess(e){e.classList.add("--form-success"),e.parentElement.classList.add("--form-success")},removeSuccess(e){e.classList.remove("--form-success"),e.parentElement.classList.remove("--form-success")},removeFocus(e){e.classList.remove("--form-focus"),e.parentElement.classList.remove("--form-focus")},formClean(e){e.reset(),setTimeout(()=>{let o=e.querySelectorAll("input,textarea");for(let s=0;s<o.length;s++){const r=o[s];l.removeFocus(r),l.removeSuccess(r),l.removeError(r)}let a=e.querySelectorAll('input[type="checkbox"]');if(a.length&&a.forEach(s=>{s.checked=!1}),window.flsSelect){let s=e.querySelectorAll("select[data-fls-select]");s.length&&s.forEach(r=>{window.flsSelect.selectBuild(r)})}},0)},emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}};function m(){function e(){const a=document.forms;if(a.length)for(const t of a)t.hasAttribute("data-fls-form-novalidate")||t.setAttribute("novalidate",!0),t.addEventListener("submit",function(n){const c=n.target;s(c,n)}),t.addEventListener("reset",function(n){const c=n.target;l.formClean(c)});async function s(t,n){if(l.getErrors(t)===0)if(t.dataset.flsForm==="ajax"){n.preventDefault();const i=t.getAttribute("action")?t.getAttribute("action").trim():"#",d=t.getAttribute("method")?t.getAttribute("method").trim():"GET",u=new FormData(t);t.classList.add("--sending");const f=await fetch(i,{method:d,body:u});if(f.ok){let p=await f.json();t.classList.remove("--sending"),r(t,p)}else t.classList.remove("--sending")}else t.dataset.flsForm==="dev"&&(n.preventDefault(),r(t));else if(n.preventDefault(),t.querySelector(".--form-error")&&t.hasAttribute("data-fls-form-gotoerr")){const i=t.dataset.flsFormGotoerr?t.dataset.flsFormGotoerr:".--form-error";v(i)}}function r(t,n=""){document.dispatchEvent(new CustomEvent("formSent",{detail:{form:t}})),setTimeout(()=>{if(window.flsPopup){const c=t.dataset.flsFormPopup;c&&window.flsPopup.open(c)}},0),l.formClean(t)}}function o(){document.body.addEventListener("focusin",function(a){const s=a.target;(s.tagName==="INPUT"||s.tagName==="TEXTAREA")&&(s.hasAttribute("data-fls-form-nofocus")||(s.classList.add("--form-focus"),s.parentElement.classList.add("--form-focus")),s.hasAttribute("data-fls-form-validatenow")&&l.removeError(s))}),document.body.addEventListener("focusout",function(a){const s=a.target;(s.tagName==="INPUT"||s.tagName==="TEXTAREA")&&(s.hasAttribute("data-fls-form-nofocus")||(s.classList.remove("--form-focus"),s.parentElement.classList.remove("--form-focus")),s.hasAttribute("data-fls-form-validatenow")&&l.validateInput(s))})}e(),o()}document.querySelector("[data-fls-form]")&&window.addEventListener("load",m);
